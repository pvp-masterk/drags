<html>
<head><link rel="stylesheet" href="style.css" /></head>
<body>
  <div class="container">
    <div class="card slide-up" id="profileCard">
      <h1 id="name">Loading...</h1>
      <img id="avatar" src="" alt="Avatar" />
      <p><strong>ID:</strong> <span id="did"></span></p>
      <p><strong>Online:</strong> Yes</p>
      <a href="settings.html">⚙️ Settings</a>
    </div>
  </div>

<script>
  const params = new URLSearchParams(window.location.search);
  const did = params.get('discord_id');
  if (!did) window.location.href = '/';

  fetch(`https://akektlyhqzbatuedgnuq.supabase.co/rest/v1/users?select=*&discord_id=eq.${did}`, {
    headers: {
      apikey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFrZWt0bHlocXpiYXR1ZWRnbnVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyMjUwNzUsImV4cCI6MjA2NzgwMTA3NX0.NqsB9Gj4_ZbZw9DgLiLxz2hwEyQvd7tCYy-drMbLGCg',
      Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFrZWt0bHlocXpiYXR1ZWRnbnVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyMjUwNzUsImV4cCI6MjA2NzgwMTA3NX0.NqsB9Gj4_ZbZw9DgLiLxz2hwEyQvd7tCYy-drMbLGCg'
    }
  })
  .then(r => r.json())
  .then(u => {
    const user = u[0];
    document.getElementById('name').textContent = user.username;
    document.getElementById('did').textContent = user.discord_id;
    if (user.avatar_url) document.getElementById('avatar').src = user.avatar_url;
  });
</script>
</body>
</html>
